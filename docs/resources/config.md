---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "dnsmasq_config Resource - dnsmasq"
subcategory: ""
description: |-
  Manages a dnsmasq configuration file.
---

# dnsmasq_config (Resource)

Manages a dnsmasq configuration file.

## Example Usage

```terraform
# Example: Full dnsmasq configuration
resource "dnsmasq_config" "main" {
  filename = "terraform-managed.conf"

  # Global settings
  global {
    user         = "dnsmasq"
    log_queries  = true
    domain       = "local.lan"
    expand_hosts = true
  }

  # DNS settings
  dns {
    port           = 53
    listen_address = ["127.0.0.1", "192.168.1.1"]
    cache_size     = 10000
    domain_needed  = true
    bogus_priv     = true

    server {
      address = "8.8.8.8"
    }

    server {
      address = "8.8.4.4"
    }

    server {
      address = "192.168.1.254"
      domain  = "corp.local"
    }
  }

  # Host records (A/AAAA)
  host_record {
    name = "server1"
    ipv4 = "192.168.1.10"
  }

  host_record {
    name = "server2"
    ipv4 = "192.168.1.11"
    ipv6 = "fd00::11"
  }

  # Address records for domain blocking
  address_record {
    domain = "ads.example.com"
    ip     = "0.0.0.0"
  }

  # CNAME aliases
  cname_record {
    alias  = "www"
    target = "server1.local.lan"
  }

  # MX records
  mx_record {
    domain     = "local.lan"
    target     = "mail.local.lan"
    preference = 10
  }

  # DHCP configuration
  dhcp {
    enabled       = true
    authoritative = true
    leasefile     = "/var/lib/misc/dnsmasq.leases"

    range {
      start      = "192.168.1.100"
      end        = "192.168.1.200"
      netmask    = "255.255.255.0"
      lease_time = "24h"
    }

    option {
      number = 3
      value  = "192.168.1.1"
    }

    option {
      number = 6
      value  = "192.168.1.1"
    }
  }

  # Static DHCP hosts
  dhcp_host {
    mac  = "00:11:22:33:44:55"
    name = "workstation1"
    ip   = "192.168.1.50"
  }
}

# Output the generated configuration
output "config_path" {
  value = dnsmasq_config.main.output_path
}

output "config_content" {
  value     = dnsmasq_config.main.rendered_content
  sensitive = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `filename` (String) Name of the configuration file to create (e.g., 'terraform-managed.conf').

### Optional

- `address_record` (Block List) Address records for domain-to-IP mapping. (see [below for nested schema](#nestedblock--address_record))
- `cname_record` (Block List) CNAME alias records. (see [below for nested schema](#nestedblock--cname_record))
- `custom_options` (List of String) Additional custom configuration lines to append.
- `dhcp` (Block, Optional) DHCP server settings. (see [below for nested schema](#nestedblock--dhcp))
- `dhcp_host` (Block List) Static DHCP host assignments. (see [below for nested schema](#nestedblock--dhcp_host))
- `dns` (Block, Optional) DNS server settings. (see [below for nested schema](#nestedblock--dns))
- `dnssec` (Block, Optional) DNSSEC validation settings. (see [below for nested schema](#nestedblock--dnssec))
- `global` (Block, Optional) Global dnsmasq settings. (see [below for nested schema](#nestedblock--global))
- `host_record` (Block List) DNS host records (A/AAAA). (see [below for nested schema](#nestedblock--host_record))
- `mx_record` (Block List) MX mail exchange records. (see [below for nested schema](#nestedblock--mx_record))
- `pxe` (Block, Optional) PXE boot settings. (see [below for nested schema](#nestedblock--pxe))
- `router_advertisement` (Block, Optional) IPv6 Router Advertisement settings. (see [below for nested schema](#nestedblock--router_advertisement))
- `srv_record` (Block List) SRV service records. (see [below for nested schema](#nestedblock--srv_record))
- `tftp` (Block, Optional) TFTP server settings. (see [below for nested schema](#nestedblock--tftp))
- `txt_record` (Block List) TXT text records. (see [below for nested schema](#nestedblock--txt_record))

### Read-Only

- `content_hash` (String) SHA256 hash of the configuration content for drift detection.
- `id` (String) Unique identifier for this configuration.
- `output_path` (String) Full path where the configuration file was written.
- `rendered_content` (String) The generated dnsmasq configuration content.

<a id="nestedblock--address_record"></a>
### Nested Schema for `address_record`

Required:

- `domain` (String) Domain name (supports wildcards).
- `ip` (String) IP address (use 0.0.0.0 to block).


<a id="nestedblock--cname_record"></a>
### Nested Schema for `cname_record`

Required:

- `alias` (String) Alias name.
- `target` (String) Target hostname.


<a id="nestedblock--dhcp"></a>
### Nested Schema for `dhcp`

Optional:

- `authoritative` (Boolean) Act as authoritative DHCP server.
- `enabled` (Boolean) Enable DHCP server.
- `leasefile` (String) DHCP lease file path.
- `option` (Block List) DHCP options. (see [below for nested schema](#nestedblock--dhcp--option))
- `range` (Block List) DHCP address ranges. (see [below for nested schema](#nestedblock--dhcp--range))

<a id="nestedblock--dhcp--option"></a>
### Nested Schema for `dhcp.option`

Required:

- `value` (String) Option value.

Optional:

- `name` (String) Option name.
- `number` (Number) Option number.
- `tag` (String) Apply to specific tag.


<a id="nestedblock--dhcp--range"></a>
### Nested Schema for `dhcp.range`

Required:

- `end` (String) End of IP range.
- `start` (String) Start of IP range.

Optional:

- `lease_time` (String) Lease time (e.g., '24h', '1d').
- `netmask` (String) Network mask.
- `tag` (String) Tag for this range.



<a id="nestedblock--dhcp_host"></a>
### Nested Schema for `dhcp_host`

Required:

- `ip` (String) IP address.
- `mac` (String) MAC address.

Optional:

- `lease_time` (String) Lease time (e.g., 'infinite', '24h').
- `name` (String) Hostname.


<a id="nestedblock--dns"></a>
### Nested Schema for `dns`

Optional:

- `bind_dynamic` (Boolean) Enable dynamic binding.
- `bogus_priv` (Boolean) Block private reverse lookups.
- `cache_size` (Number) DNS cache size.
- `dns_loop_detect` (Boolean) Detect DNS forwarding loops.
- `domain_needed` (Boolean) Don't forward unqualified names.
- `interface` (List of String) Interfaces to listen on.
- `listen_address` (List of String) IP addresses to listen on.
- `no_resolv` (Boolean) Don't read /etc/resolv.conf.
- `port` (Number) DNS port (default: 53).
- `rebind_localhost_ok` (Boolean) Allow localhost in rebind check.
- `server` (Block List) Upstream DNS servers. (see [below for nested schema](#nestedblock--dns--server))
- `stop_dns_rebind` (Boolean) Reject private range addresses in DNS responses.

<a id="nestedblock--dns--server"></a>
### Nested Schema for `dns.server`

Required:

- `address` (String) Server IP address.

Optional:

- `domain` (String) Domain to use this server for.



<a id="nestedblock--dnssec"></a>
### Nested Schema for `dnssec`

Optional:

- `check_unsigned` (Boolean) Check unsigned replies.
- `enabled` (Boolean) Enable DNSSEC validation.
- `trust_anchor` (List of String) DNSSEC trust anchors.


<a id="nestedblock--global"></a>
### Nested Schema for `global`

Optional:

- `domain` (String) Domain for DHCP clients.
- `expand_hosts` (Boolean) Add domain to simple hostnames.
- `group` (String) Group to run dnsmasq as.
- `localise_queries` (Boolean) Return subnet-specific addresses.
- `log_async` (Number) Async logging queue size.
- `log_dhcp` (Boolean) Enable DHCP logging.
- `log_facility` (String) Log facility or file path.
- `log_queries` (Boolean) Enable DNS query logging.
- `user` (String) User to run dnsmasq as.


<a id="nestedblock--host_record"></a>
### Nested Schema for `host_record`

Required:

- `name` (String) Hostname.

Optional:

- `ipv4` (String) IPv4 address.
- `ipv6` (String) IPv6 address.
- `ttl` (Number) TTL in seconds.


<a id="nestedblock--mx_record"></a>
### Nested Schema for `mx_record`

Required:

- `domain` (String) Domain name.
- `target` (String) Mail server hostname.

Optional:

- `preference` (Number) MX preference (lower = higher priority).


<a id="nestedblock--pxe"></a>
### Nested Schema for `pxe`

Optional:

- `prompt` (Block, Optional) PXE boot prompt. (see [below for nested schema](#nestedblock--pxe--prompt))
- `service` (Block List) PXE boot services. (see [below for nested schema](#nestedblock--pxe--service))

<a id="nestedblock--pxe--prompt"></a>
### Nested Schema for `pxe.prompt`

Optional:

- `text` (String) Prompt text.
- `timeout` (Number) Timeout in seconds.


<a id="nestedblock--pxe--service"></a>
### Nested Schema for `pxe.service`

Optional:

- `basename` (String) Boot file basename.
- `csa` (String) Client system architecture.
- `menu_text` (String) Menu text.
- `server` (String) Boot server address.



<a id="nestedblock--router_advertisement"></a>
### Nested Schema for `router_advertisement`

Optional:

- `enabled` (Boolean) Enable router advertisement.
- `param` (Block List) RA parameters per interface. (see [below for nested schema](#nestedblock--router_advertisement--param))

<a id="nestedblock--router_advertisement--param"></a>
### Nested Schema for `router_advertisement.param`

Required:

- `interface` (String) Interface name.

Optional:

- `mtu` (Number) MTU to advertise.



<a id="nestedblock--srv_record"></a>
### Nested Schema for `srv_record`

Required:

- `port` (Number) Port number.
- `service` (String) Service name (e.g., '_ldap._tcp.example.com').
- `target` (String) Target hostname.

Optional:

- `priority` (Number) Priority.
- `weight` (Number) Weight.


<a id="nestedblock--tftp"></a>
### Nested Schema for `tftp`

Optional:

- `enabled` (Boolean) Enable TFTP server.
- `root` (String) TFTP root directory.
- `secure` (Boolean) Only serve files owned by dnsmasq user.


<a id="nestedblock--txt_record"></a>
### Nested Schema for `txt_record`

Required:

- `name` (String) Record name.
- `value` (String) Record value.
